<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg: radial-gradient(circle at top,#e8f0fe,#fce8e6,#e6f4ea);
  --card:#fff;
  --board:#f1f3f4;
  --head:#1a73e8;
  --body:#34a853;
  --food:#ea4335;
}
.neon{
  --bg: radial-gradient(circle at top,#020617,#0f172a,#020617);
  --card:#020617;
  --board:#020617;
  --head:#22c55e;
  --body:#16a34a;
  --food:#facc15;
}
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:var(--bg);
  font-family:system-ui,Arial,sans-serif;
}
#card{
  background:var(--card);
  border-radius:20px;
  padding:18px;
  box-shadow:0 30px 70px rgba(0,0,0,.25);
  position:relative;
}
canvas{
  background:var(--board);
  border-radius:16px;
}
#overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}
#panel{
  background:var(--card);
  padding:24px 28px;
  border-radius:18px;
  box-shadow:0 25px 60px rgba(0,0,0,.3);
  text-align:center;
}
#panel h1{margin:0 0 8px;font-size:24px;}
#panel p{margin:4px 0;font-size:14px;}
#panel button{
  margin-top:12px;
  padding:9px 20px;
  border:none;
  border-radius:999px;
  background:var(--head);
  color:#fff;
  font-size:14px;
  cursor:pointer;
}
#toggle{
  margin-top:8px;
  font-size:12px;
  opacity:.7;
  cursor:pointer;
}
#brand{
  margin-top:10px;
  font-size:11px;
  opacity:.55;
  letter-spacing:.4px;
}
</style>
</head>
<body>

<div id="card">
  <canvas id="game" width="320" height="320"></canvas>
  <div id="overlay">
    <div id="panel">
      <h1 id="title">Snake</h1>
      <p id="info">Use arrows or swipe</p>
      <p id="best"></p>
      <button onclick="start()">Play</button>
      <div id="toggle" onclick="toggleTheme()">Toggle theme</div>
      <div id="brand"></div>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const grid = 20;

let snake, food, dx, dy, score, loop, running=false;
let blink=true, blinkTimer=0;
let bestScore = localStorage.getItem("snake-best") || 0;

const overlay = document.getElementById("overlay");
const title = document.getElementById("title");
const info = document.getElementById("info");
const brand = document.getElementById("brand");
const best = document.getElementById("best");

const eatSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-game-ball-tap-2073.mp3");
const overSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.mp3");

best.textContent = "Best: " + bestScore;

function start(){
  snake=[{x:160,y:160}];
  food=randomFood();
  dx=grid; dy=0;
  score=0;
  running=true;
  brand.textContent="";
  overlay.style.display="none";
  clearInterval(loop);
  loop=setInterval(tick,110);
}

function gameOver(){
  running=false;
  clearInterval(loop);
  overSound.play();
  if(score>bestScore){
    bestScore=score;
    localStorage.setItem("snake-best",bestScore);
  }
  title.textContent="Game Over";
  info.textContent="Score: "+score;
  best.textContent="Best: "+bestScore;
  brand.textContent="Snake game by Vrishab Varun";
  overlay.style.display="flex";
}

function randomFood(){
  return{
    x:Math.floor(Math.random()*16)*grid,
    y:Math.floor(Math.random()*16)*grid
  };
}

function drawSnake(){
  snake.forEach((p,i)=>{
    ctx.fillStyle=i===0?getCss("--head"):getCss("--body");
    ctx.beginPath();
    ctx.roundRect(p.x,p.y,grid,grid,9);
    ctx.fill();

    if(i===0 && blink){
      ctx.fillStyle="#fff";
      let ex = dx>0?13:dx<0?7:10;
      let ey = dy>0?13:dy<0?7:10;
      ctx.beginPath();
      ctx.arc(p.x+ex,p.y+ey,2.6,0,Math.PI*2);
      ctx.fill();
    }
  });
}

function tick(){
  blinkTimer++;
  if(blinkTimer>15){ blink=!blink; blinkTimer=0; }

  const head={x:snake[0].x+dx,y:snake[0].y+dy};
  if(head.x<0||head.y<0||head.x>=320||head.y>=320||
     snake.some(s=>s.x===head.x&&s.y===head.y)){
    gameOver(); return;
  }
  snake.unshift(head);
  if(head.x===food.x&&head.y===food.y){
    score++;
    eatSound.play();
    food=randomFood();
  }else snake.pop();

  ctx.clearRect(0,0,320,320);

  ctx.fillStyle=getCss("--food");
  ctx.shadowColor=getCss("--food");
  ctx.shadowBlur=10;
  ctx.beginPath();
  ctx.arc(food.x+10,food.y+10,8,0,Math.PI*2);
  ctx.fill();
  ctx.shadowBlur=0;

  drawSnake();
}

function getCss(v){ return getComputedStyle(document.documentElement).getPropertyValue(v); }

document.addEventListener("keydown",e=>{
  if(!running) return;
  if(e.key==="ArrowUp"&&dy===0){dx=0;dy=-grid;}
  if(e.key==="ArrowDown"&&dy===0){dx=0;dy=grid;}
  if(e.key==="ArrowLeft"&&dx===0){dx=-grid;dy=0;}
  if(e.key==="ArrowRight"&&dx===0){dx=grid;dy=0;}
});

// Mobile swipe
let sx,sy;
canvas.addEventListener("touchstart",e=>{
  sx=e.touches[0].clientX;
  sy=e.touches[0].clientY;
});
canvas.addEventListener("touchend",e=>{
  let dxs=e.changedTouches[0].clientX-sx;
  let dys=e.changedTouches[0].clientY-sy;
  if(Math.abs(dxs)>Math.abs(dys)){
    if(dxs>0&&dx===0){dx=grid;dy=0;}
    if(dxs<0&&dx===0){dx=-grid;dy=0;}
  }else{
    if(dys>0&&dy===0){dx=0;dy=grid;}
    if(dys<0&&dy===0){dx=0;dy=-grid;}
  }
});

function toggleTheme(){
  document.body.classList.toggle("neon");
}
</script>
</body>
</html>
