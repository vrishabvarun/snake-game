<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#e8f0fe,#fef7e0,#e6f4ea);
  background-size:400% 400%;
  animation:bg 18s ease infinite;
  font-family:system-ui,Arial;
}
@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
body.rainbow{
  background:linear-gradient(270deg,#ff0080,#7928ca,#2afadf,#4facfe,#43e97b,#facc15,#ff0080);
  background-size:600% 600%;
  animation:bg 9s ease infinite;
}
#card{
  background:#fff;
  border-radius:20px;
  padding:18px;
  box-shadow:0 30px 70px rgba(0,0,0,.25);
  position:relative;
}
canvas{
  background:#f1f3f4;
  border-radius:16px;
}
#overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}
#panel{
  background:#fff;
  padding:26px 30px;
  border-radius:18px;
  box-shadow:0 25px 60px rgba(0,0,0,.3);
  text-align:center;
  max-width:260px;
}
#panel h1{margin:0 0 6px;font-size:24px}
#panel p{margin:6px 0;font-size:14px}
#panel button{
  margin-top:14px;
  padding:9px 22px;
  border:none;
  border-radius:999px;
  background:#1a73e8;
  color:#fff;
  font-size:14px;
}
#brand{
  margin-top:8px;
  font-size:11px;
  opacity:.5;
}
#toggle{
  margin-top:8px;
  font-size:12px;
  opacity:.7;
  cursor:pointer;
}
.confetti{
  position:fixed;
  inset:0;
  pointer-events:none;
}
</style>
</head>
<body>

<div id="card">
  <canvas id="game" width="320" height="320"></canvas>
  <div id="overlay">
    <div id="panel">
      <h1 id="title">Snake</h1>
      <p id="message">Use arrow keys or swipe</p>
      <button onclick="start()">Play</button>
      <div id="brand"></div>
      <div id="toggle" onclick="toggleTheme()">Toggle theme</div>
    </div>
  </div>
</div>

<canvas class="confetti" id="confetti"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const overlay=document.getElementById("overlay");
const title=document.getElementById("title");
const message=document.getElementById("message");
const brand=document.getElementById("brand");
const grid=20;

let snake,food,dx,dy,loop,running=false,score=0,roasted=false;

function start(){
  snake=[{x:160,y:160}];
  food=randomFood();
  dx=grid;dy=0;
  score=0;
  roasted=false;
  running=true;
  title.textContent="Snake";
  message.textContent="Use arrow keys or swipe";
  brand.textContent="";
  overlay.style.display="none";
  clearInterval(loop);
  loop=setInterval(tick,120);
}

function randomFood(){
  return{
    x:Math.floor(Math.random()*16)*grid,
    y:Math.floor(Math.random()*16)*grid
  };
}

function drawSnake(){
  snake.forEach((p,i)=>{
    if(i===0){
      const grad=ctx.createLinearGradient(p.x,p.y,p.x+grid,p.y+grid);
      grad.addColorStop(0,"#ff0080");
      grad.addColorStop(0.5,"#7928ca");
      grad.addColorStop(1,"#2afadf");
      ctx.fillStyle=grad;
      ctx.beginPath();
      ctx.roundRect(p.x,p.y,grid,grid,9);
      ctx.fill();

      ctx.fillStyle="#fff";
      const ex=dx>0?13:dx<0?7:10;
      const ey=dy>0?13:dy<0?7:10;
      ctx.beginPath();
      ctx.arc(p.x+ex,p.y+ey,2.5,0,Math.PI*2);
      ctx.fill();

      ctx.strokeStyle="#000";
      ctx.lineWidth=1.2;
      ctx.beginPath();
      ctx.arc(p.x+10,p.y+13,4,0,Math.PI);
      ctx.stroke();
    }else{
      ctx.fillStyle=roasted?"#555":`hsl(${(i*30)%360},90%,55%)`;
      ctx.beginPath();
      ctx.roundRect(p.x,p.y,grid,grid,8);
      ctx.fill();
    }
  });
}

function roast(){
  let text="";
  let conf=false;

  if(score===0){
    text="You didn‚Äôt even start üò≠";
    roasted=true;
  }else if(score<5){
    text="That was embarrassing üò¨";
    roasted=true;
  }else if(score<10){
    text="Skill issue detected üëÄ";
  }else if(score<20){
    text="Redeem yourself üëÄüî•";
    conf=true;
  }else if(score>=25){
    text="You are the snake üêê";
    conf=true;
  }else{
    text="Respect ü´°";
  }

  message.textContent=text;
  brand.textContent="Snake Game by Vrishab Varun";
  if(conf) launchConfetti();
}

function gameOver(){
  running=false;
  clearInterval(loop);
  title.textContent="Game Over";
  roast();
  overlay.style.display="flex";
}

function tick(){
  if(!running) return;
  const head={x:snake[0].x+dx,y:snake[0].y+dy};

  if(
    head.x<0||head.y<0||
    head.x>=320||head.y>=320||
    snake.some(s=>s.x===head.x&&s.y===head.y)
  ){
    gameOver(); return;
  }

  snake.unshift(head);

  if(head.x===food.x&&head.y===food.y){
    score++;
    food=randomFood();
  }else snake.pop();

  ctx.clearRect(0,0,320,320);

  ctx.font="18px system-ui";
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.fillText("üçé",food.x+10,food.y+10);

  drawSnake();
}

document.addEventListener("keydown",e=>{
  if(!running) return;
  if(e.key==="ArrowUp"&&dy===0){dx=0;dy=-grid;}
  if(e.key==="ArrowDown"&&dy===0){dx=0;dy=grid;}
  if(e.key==="ArrowLeft"&&dx===0){dx=-grid;dy=0;}
  if(e.key==="ArrowRight"&&dx===0){dx=grid;dy=0;}
});

// Swipe
let sx=0,sy=0;
canvas.addEventListener("touchstart",e=>{
  const t=e.touches[0];sx=t.clientX;sy=t.clientY;
});
canvas.addEventListener("touchend",e=>{
  if(!running) return;
  const t=e.changedTouches[0];
  const dxs=t.clientX-sx;
  const dys=t.clientY-sy;
  if(Math.abs(dxs)>Math.abs(dys)){
    if(dxs>0&&dx===0){dx=grid;dy=0;}
    else if(dxs<0&&dx===0){dx=-grid;dy=0;}
  }else{
    if(dys>0&&dy===0){dx=0;dy=grid;}
    else if(dys<0&&dy===0){dx=0;dy=-grid;}
  }
});

function toggleTheme(){
  document.body.classList.toggle("rainbow");
}

// Confetti
function launchConfetti(){
  const c=document.getElementById("confetti");
  const x=c.getContext("2d");
  c.width=innerWidth;c.height=innerHeight;
  let p=[...Array(120)].map(()=>({
    x:Math.random()*c.width,
    y:Math.random()*c.height,
    r:Math.random()*6+4,
    d:Math.random()*360
  }));
  let t=0;
  const a=setInterval(()=>{
    x.clearRect(0,0,c.width,c.height);
    p.forEach(o=>{
      x.fillStyle=`hsl(${o.d},100%,60%)`;
      x.beginPath();
      x.arc(o.x,o.y,o.r,0,Math.PI*2);
      x.fill();
      o.y+=3;
    });
    if(++t>60){clearInterval(a);x.clearRect(0,0,c.width,c.height);}
  },16);
}
</script>
</body>
</html>
