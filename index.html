<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background: linear-gradient(135deg,#e8f0fe,#fef7e0,#e6f4ea);
  background-size:400% 400%;
  animation:bg 18s ease infinite;
  font-family:system-ui,Arial;
}
@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
body.rainbow{
  background:linear-gradient(270deg,#ff0080,#7928ca,#2afadf,#4facfe,#43e97b,#facc15,#ff0080);
  background-size:600% 600%;
  animation:bg 9s ease infinite;
}
#card{
  background:#fff;
  border-radius:20px;
  padding:18px;
  box-shadow:0 30px 70px rgba(0,0,0,.25);
  position:relative;
}
canvas{background:#f1f3f4;border-radius:16px}
#overlay{
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
}
#panel{
  background:#fff;
  padding:26px 30px;
  border-radius:18px;
  box-shadow:0 25px 60px rgba(0,0,0,.3);
  text-align:center;
  max-width:280px;
}
#panel h1{margin:0 0 6px;font-size:24px}
#panel p{margin:6px 0;font-size:14px}
#panel button{
  margin-top:14px;padding:9px 22px;border:none;
  border-radius:999px;background:#1a73e8;color:#fff;
}
#toggle{margin-top:8px;font-size:12px;opacity:.7;cursor:pointer}
#brand{margin-top:10px;font-size:11px;opacity:.55}
.confetti{
  position:absolute;width:8px;height:8px;
  animation:fall 1.4s ease-out forwards;
}
@keyframes fall{
  to{transform:translateY(140px) rotate(720deg);opacity:0}
}
</style>
</head>
<body>

<div id="card">
  <canvas id="game" width="320" height="320"></canvas>
  <div id="overlay">
    <div id="panel">
      <h1 id="title">Snake</h1>
      <p id="info">Use arrows or swipe</p>
      <p id="best"></p>
      <button onclick="start()">Play</button>
      <div id="toggle" onclick="toggleTheme()">Toggle theme</div>
      <div id="brand"></div>
    </div>
  </div>
</div>

<script>
const c=document.getElementById("game"),x=c.getContext("2d");
const g=20;
let s,f,dx,dy,sc,loop,run=false;
let best=localStorage.getItem("snake-best")||0;
let hc="#1a73e8",bc="#34a853",shake=0;

const title=titleEl=title,info=infoEl=info;
bestEl=best;bestEl.textContent="Best: "+best;

function roast(score){
  if(score===0) return ["ZERO POINTS ðŸ˜­ðŸ’€ðŸ¤¡ UNINSTALL","â€‹#dc2626",true];
  if(score<=2) return ["ABSOLUTE DISASTER ðŸ˜­ðŸ’€ðŸ”¥","â€‹#ef4444",true];
  if(score<=6) return ["SKILL ISSUE ðŸ˜¬ðŸ“‰","â€‹#f97316",true];
  if(score<=10) return ["REDEEM YOURSELF ðŸ‘€ðŸ”¥ðŸŽ¯","â€‹#eab308",false];
  if(score<=15) return ["OKAYâ€¦ NOT TERRIBLE ðŸ˜Žâœ¨","â€‹#22c55e",false];
  if(score>=25 && Math.random()<0.4)
    return ["YOU BROKE THE GAME ðŸðŸ‘‘ðŸ”¥","â€‹#3b82f6",false];
  return ["RESPECT ðŸ«¡âœ¨","â€‹#3b82f6",false];
}

function start(){
  s=[{x:160,y:160}];f=rnd();dx=g;dy=0;sc=0;run=true;
  overlay.style.display="none";
  clearInterval(loop);loop=setInterval(tick,110);
}

function end(){
  run=false;clearInterval(loop);
  if(sc>best){best=sc;localStorage.setItem("snake-best",best);}
  const [m,col,ang]=roast(sc);
  hc=bc=col;shake=ang?10:0;
  title.textContent="Game Over";
  info.textContent=m;
  bestEl.textContent="Score: "+sc+" | Best: "+best;
  brand.textContent="Snake game by Vrishab Varun";
  overlay.style.display="flex";
  if(m.includes("REDEEM")) confetti();
}

function rnd(){return{x:Math.floor(Math.random()*16)*g,y:Math.floor(Math.random()*16)*g};}

function draw(){
  s.forEach((p,i)=>{
    x.save();
    if(i===0&&shake)x.translate(Math.sin(shake)*4,0);
    x.fillStyle=i?bc:hc;
    x.beginPath();x.roundRect(p.x,p.y,g,g,9);x.fill();
    x.restore();
  });
  if(shake)shake--;
}

function tick(){
  const h={x:s[0].x+dx,y:s[0].y+dy};
  if(h.x<0||h.y<0||h.x>=320||h.y>=320||s.some(p=>p.x===h.x&&p.y===h.y))
    return end();
  s.unshift(h);
  if(h.x===f.x&&h.y===f.y){sc++;f=rnd();}else s.pop();
  x.clearRect(0,0,320,320);
  x.fillStyle="#ea4335";x.shadowBlur=12;
  x.beginPath();x.arc(f.x+10,f.y+10,8,0,Math.PI*2);x.fill();
  x.shadowBlur=0;draw();
}

document.addEventListener("keydown",e=>{
  if(!run)return;
  if(e.key==="ArrowUp"&&dy===0){dx=0;dy=-g}
  if(e.key==="ArrowDown"&&dy===0){dx=0;dy=g}
  if(e.key==="ArrowLeft"&&dx===0){dx=-g;dy=0}
  if(e.key==="ArrowRight"&&dx===0){dx=g;dy=0}
});
function toggleTheme(){document.body.classList.toggle("rainbow");}
function confetti(){
  for(let i=0;i<35;i++){
    const d=document.createElement("div");
    d.className="confetti";
    d.style.background=`hsl(${Math.random()*360},90%,60%)`;
    d.style.left=(150+Math.random()*60)+"px";
    d.style.top="140px";
    document.body.appendChild(d);
    setTimeout(()=>d.remove(),1500);
  }
}
</script>
</body>
</html>
